language: php

php:
  - 5.2
  - 5.3
  - 5.4
  - 5.5

before_script:
  - sh -c "if [ '$TRAVIS_PHP_VERSION' != '5.2' ]; then pyrus install http://phptal.org/latest.tar.gz && pear install pear/PHP_CodeSniffer && phpenv rehash; fi"
  - sh -c "if [ '$TRAVIS_PHP_VERSION' = '5.2' ]; then git clone https://github.com/vierbergenlars/simpletest test/simpletest; else composer install --dev --prefer-source; fi"

script:
 - sh -c "if [ '$TRAVIS_PHP_VERSION' = '5.5' ]; then phpcs --standard=zend --encoding=UTF-8 --report=summary --ignore=*/vendor/* -p; fi"
 - php test/Stripe.php
